{{!-- src/views/partials/header.hbs --}}

{{!-- src/views/partials/header.hbs --}}

<header class="site-header">
    <nav id="global-nav" class="global-navbar" aria-label="Navigation principale">
        <div class="nav-container">
            <div class="nav-top-row">
                <a href="/" class="nav-brand" aria-label="Connect People - Accueil">
                    <span aria-hidden="true">Connect People</span>
                </a>

                <div class="nav-search">
                    <form class="search-bar-nav" role="search" action="/recherche" method="get" autocomplete="off">
                        <label for="search-category-select" class="visually-hidden">CatÃ©gorie</label>
                        <div class="search-category-wrapper">
                            <select class="search-category-select" id="search-category-select" name="cat">
                                <option value="centre-aide">Centre d'aide</option>
                                <option value="membres">Membres</option>
                                <option value="annonces">Annonces</option>
                            </select>
                        </div>
                        <div class="search-separator" aria-hidden="true"></div>
                        <label for="nav-search-input" class="visually-hidden">Mots-clÃ©s</label>
                        <i class="fas fa-search" aria-hidden="true"></i>
                        <input id="nav-search-input" name="q" type="search"
                               placeholder="Tapez votre recherche..."
                               autocomplete="off" aria-required="false">
                        <button type="submit" class="visually-hidden">Rechercher</button>
                    </form>
                </div>

                <div class="nav-right">
                    <div id="auth-buttons" class="auth-buttons">
                        <button class="nav-btn" data-action="login">Se connecter</button>
                        <button class="nav-btn" data-action="register">S'inscrire</button>
                    </div>

                    <div class="language-selector">
                        <select class="language-select" id="language-select" aria-label="Choisir la langue">
                            <option value="fr">ğŸ‡«ğŸ‡· FR</option>
                            <option value="it">ğŸ‡®ğŸ‡¹ IT</option>
                            <option value="en">ğŸ‡¬ğŸ‡§ EN</option>
                            <option value="es">ğŸ‡ªğŸ‡¸ ES</option>
                            <option value="ar">ğŸ‡¸ğŸ‡¦ AR</option>
                        </select>
                    </div>

                    <div id="user-menu" class="user-menu-nav" hidden>
                        <div class="wallet-display">
                            <i class="fas fa-wallet" aria-hidden="true"></i>
                            <span id="wallet-balance-nav">â‚¬0.00</span>
                        </div>
                        <div class="user-profile">
                            <img src="https://via.placeholder.com/32" alt="Avatar" class="user-avatar-nav">
                            <span id="user-name-nav">John Doe</span>
                            <div class="dropdown-nav">
                                <a href="#" data-dashboard-section="dashboard"><i class="fas fa-tachometer-alt"></i> Tableau de bord</a>
                                <a href="#" data-action="profile"><i class="fas fa-user"></i> Profil</a>
                                <a href="#" data-action="wallet"><i class="fas fa-wallet"></i> Portefeuille</a>
                                <a href="#" data-action="open-chat"><i class="fas fa-comments"></i> Messages</a>
                                <div class="dropdown-divider"></div>
                                <a href="#" data-action="logout"><i class="fas fa-sign-out-alt"></i> DÃ©connexion</a>
                            </div>
                        </div>
                    </div>

                    <button class="mobile-menu-toggle" data-action="mobile-menu-toggle"
                            aria-label="Ouvrir le menu" aria-expanded="false">
                        <div class="hamburger-container">
                            <span class="hamburger-line"></span>
                            <span class="hamburger-line"></span>
                            <span class="hamburger-line"></span>
                        </div>
                    </button>
                </div>
            </div>

            <div class="nav-center" id="nav-center">
                <ul class="nav-links">
                    {{> nav-immobilier}}
                    {{> nav-entreprendre}}
                    {{> nav-traduction}}
                    <li><a href="/nos-helpers" class="nav-link">Nos Helpers</a></li>
                    <li><a href="/nos-annonces" class="nav-link">Nos Annonces</a></li>
                    <li><a href="/documentation" class="nav-link">Documentation</a></li>
                </ul>
            </div><!-- /nav-center -->
        </div><!-- /nav-container -->
    </nav>
</header>

<!-- Modal de langue -->
<div id="language-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
    <div style="background: linear-gradient(135deg, #3A5F87, #2E5077); color: white; padding: 2rem; border-radius: 12px; text-align: center; min-width: 300px;">
        <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸŒ</div>
        <div id="language-text" style="font-size: 1.1rem; margin-bottom: 1rem;"></div>
        <div id="language-flag" style="font-size: 2rem;"></div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const messages = {
        'fr': { text: 'Vous avez choisi de poursuivre en franÃ§ais', flag: 'ğŸ‡«ğŸ‡·' },
        'en': { text: 'You have chosen to continue in English', flag: 'ğŸ‡¬ğŸ‡§' },
        'es': { text: 'Has elegido continuar en espaÃ±ol', flag: 'ğŸ‡ªğŸ‡¸' },
        'it': { text: 'Hai scelto di continuare in italiano', flag: 'ğŸ‡®ğŸ‡¹' },
        'ar': { text: 'Ù„Ù‚Ø¯ Ø§Ø®ØªØ±Øª Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', flag: 'ğŸ‡¸ğŸ‡¦' }
    };
    
    const langSelect = document.getElementById('language-select');
    if (langSelect) {
        langSelect.addEventListener('change', function(e) {
            const message = messages[e.target.value];
            if (message) {
                document.getElementById('language-text').textContent = message.text;
                document.getElementById('language-flag').textContent = message.flag;
                const modal = document.getElementById('language-modal');
                modal.style.display = 'flex';
                setTimeout(() => modal.style.display = 'none', 3000);
            }
        });
    }
});
</script>

<!-- Modal de langue -->
<div id="language-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
    <div style="background: linear-gradient(135deg, #3A5F87, #2E5077); color: white; padding: 2rem; border-radius: 12px; text-align: center; min-width: 300px;">
        <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸŒ</div>
        <div id="language-text" style="font-size: 1.1rem; margin-bottom: 1rem;"></div>
        <div id="language-flag" style="font-size: 2rem;"></div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const messages = {
        'fr': { text: 'Vous avez choisi de poursuivre en franÃ§ais', flag: 'ğŸ‡«ğŸ‡·' },
        'en': { text: 'You have chosen to continue in English', flag: 'ğŸ‡¬ğŸ‡§' },
        'es': { text: 'Has elegido continuar en espaÃ±ol', flag: 'ğŸ‡ªğŸ‡¸' }
    };
    
    const langSelect = document.getElementById('language-select');
    if (langSelect) {
        langSelect.addEventListener('change', function(e) {
            const message = messages[e.target.value];
            if (message) {
                document.getElementById('language-text').textContent = message.text;
                document.getElementById('language-flag').textContent = message.flag;
                const modal = document.getElementById('language-modal');
                modal.style.display = 'flex';
                setTimeout(() => modal.style.display = 'none', 3000);
            }
        });
    }
});
</script>